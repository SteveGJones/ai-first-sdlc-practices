# Migration Guide: v1.3.0 to v1.4.0

**Date:** 2025-07-17  
**Type:** Patch Update  
**Breaking Changes:** No  

## Overview

This update fixes test failures and code quality issues, and adds important guidelines for handling mixed content in documentation files. These changes prevent documentation corruption when AI agents perform bulk updates.

## Bug Fixes & Improvements

1. **Test Alignment**: Fixed "Lessons Learned" vs "Key Learnings" mismatch
2. **Code Quality**: Resolved 85 flake8 violations
3. **Mixed Content Guidelines**: Added context awareness for bulk updates

## Files to Update

### 1. Update CLAUDE.md Template
```bash
curl -sSL https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/templates/CLAUDE.md > templates/CLAUDE.md
```

### 2. Update Test File (If You Have Local Copy)
```bash
# Only if you have the test file locally
curl -sSL https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/tests/test_ai_friendliness.py > tests/test_ai_friendliness.py
```

### 3. Update Test Scenarios (If You Have Local Copies)
```bash
# Only if you have test scenarios locally
curl -sSL https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/test-scenarios/scenario_simple_project.py > test-scenarios/scenario_simple_project.py
curl -sSL https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/test-scenarios/scenario_complex_project.py > test-scenarios/scenario_complex_project.py
curl -sSL https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/test-scenarios/scenario_enterprise_project.py > test-scenarios/scenario_enterprise_project.py
curl -sSL https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/test-scenarios/final_integration_test.py > test-scenarios/final_integration_test.py
```

## Verification Steps

After completing updates:

1. **Check Mixed Content Section**:
   ```bash
   grep -q "Working with Mixed Content" templates/CLAUDE.md && echo "✅ Mixed content guidelines found" || echo "❌ Missing guidelines"
   ```

2. **Verify Key Learnings Fix**:
   ```bash
   grep -q "Key Learnings" templates/retrospective.md && echo "✅ Template uses Key Learnings" || echo "❌ Check template"
   ```

3. **If You Have Tests, Run Them**:
   ```bash
   # Only if you have the test suite
   python -m pytest tests/test_ai_friendliness.py -v
   ```

## Complete the Update

Once all files are updated and verified:

```bash
echo "1.4.0" > VERSION
```

## Key Changes to Note

### Mixed Content Handling

The CLAUDE.md template now includes important guidelines for handling files with mixed content types (e.g., Mermaid diagrams + code examples):

1. **Identify Content Types First** - Check what types of code blocks exist
2. **Be Explicit About Scope** - Specify exactly which blocks to modify
3. **Create Validation Before Changes** - Test changes work correctly
4. **Test Incrementally** - Update one file first before bulk operations

This prevents issues like Mermaid syntax appearing in JSON blocks or vice versa.

## Troubleshooting

### If file downloads fail:
1. **Check for partial downloads**:
   ```bash
   ls -la *.1  # Look for files with .1 extension
   rm *.1      # Remove partial downloads
   ```

2. **Verify connectivity**:
   ```bash
   curl -I https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/VERSION
   ```

3. **Try alternative download method**:
   ```bash
   # If curl fails, try wget
   wget https://raw.githubusercontent.com/SteveGJones/ai-first-sdlc-practices/main/[file-path] -O [local-file]
   ```

### If verification steps fail:
- **DO NOT proceed** with VERSION update
- Report specific failure to user
- Check file contents manually
- Re-download failed files if needed

## Summary of Changes

You've successfully updated to v1.4.0! This version includes:

- **Fixed Tests**: "Key Learnings" terminology is now consistent
- **Clean Code**: All flake8 violations have been resolved
- **Safer Bulk Updates**: New guidelines prevent mixed content corruption

The most important addition is the mixed content awareness - when updating multiple files, always check what types of content blocks exist first!

<!-- SELF-REVIEW CHECKPOINT
Before finalizing, verify:
- All required sections are complete
- Content addresses original requirements
- Technical accuracy and consistency
- No gaps or contradictions
-->