# Feature Proposal: One-Command Claude Launcher

## Summary
Create a single `./bin/claude` script that automatically sets up the Python virtual environment and launches Claude Code in the correct context, eliminating all manual setup steps.

## Problem Statement
Currently, users must:
1. Remember to activate virtual environment
2. Navigate to the project directory
3. Launch Claude with the correct working directory
4. Ensure environment variables are set

This is too many steps for a smooth developer experience. Users want:
- **One command to rule them all**: `./bin/claude`
- **Zero thinking required**: Everything just works
- **Project-aware Claude**: Claude starts with the right context

## Proposed Solution

### The `bin/claude` Script
A single launcher that:
1. Ensures virtual environment exists (creates if missing)
2. Activates the virtual environment
3. Sets up the project context
4. Launches Claude Code with the project directory
5. Provides helpful project information

### Implementation

```bash
#!/bin/bash
# bin/claude - One-command Claude launcher for AI-First SDLC projects
# Generated by setup-smart.py

set -e

# Configuration
PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
VENV_DIR="$PROJECT_ROOT/venv"
PROJECT_NAME="$(basename "$PROJECT_ROOT")"

# Colors
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${BLUE}🤖 Claude Launcher for $PROJECT_NAME${NC}"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

# Ensure we're in project directory
cd "$PROJECT_ROOT"

# Check/create virtual environment
if [ ! -d "$VENV_DIR" ]; then
    echo -e "${YELLOW}Creating Python virtual environment...${NC}"
    python3 -m venv "$VENV_DIR"
    source "$VENV_DIR/bin/activate"
    pip install --upgrade pip --quiet
    if [ -f "requirements.txt" ]; then
        echo "Installing requirements..."
        pip install -r requirements.txt
    fi
    echo -e "${GREEN}✓ Virtual environment ready${NC}"
else
    source "$VENV_DIR/bin/activate"
    echo -e "${GREEN}✓ Virtual environment activated${NC}"
fi

# Display project info
echo ""
echo "Project: $PROJECT_NAME"
echo "Python: $(which python)"
echo "Directory: $PROJECT_ROOT"
echo ""

# Check if Claude is installed
if ! command -v claude &> /dev/null; then
    echo -e "${YELLOW}Claude CLI not found. Installing...${NC}"
    echo "Visit: https://claude.ai/download"
    echo ""
    echo "Or install with:"
    echo "  macOS: brew install claude"
    echo "  Linux: See https://claude.ai/download"
    echo ""
    exit 1
fi

# Launch Claude with project context
echo -e "${BLUE}Launching Claude Code...${NC}"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

# Start Claude in the project directory with venv activated
exec claude --project "$PROJECT_ROOT"
```

### Windows Version: `bin/claude.bat`

```batch
@echo off
REM bin/claude.bat - One-command Claude launcher for Windows
REM Generated by setup-smart.py

setlocal
set PROJECT_ROOT=%~dp0..
set VENV_DIR=%PROJECT_ROOT%\venv
cd /d "%PROJECT_ROOT%"

echo Claude Launcher for %PROJECT_ROOT%
echo =====================================

REM Check/create virtual environment
if not exist "%VENV_DIR%\Scripts\activate.bat" (
    echo Creating Python virtual environment...
    python -m venv "%VENV_DIR%"
    call "%VENV_DIR%\Scripts\activate.bat"
    python -m pip install --upgrade pip --quiet
    if exist "requirements.txt" (
        echo Installing requirements...
        pip install -r requirements.txt
    )
    echo Virtual environment ready
) else (
    call "%VENV_DIR%\Scripts\activate.bat"
    echo Virtual environment activated
)

REM Display project info
echo.
echo Project: %PROJECT_ROOT%
where python
echo.

REM Check if Claude is installed
where claude >nul 2>nul
if errorlevel 1 (
    echo Claude CLI not found. Please install from:
    echo https://claude.ai/download
    pause
    exit /b 1
)

REM Launch Claude
echo Launching Claude Code...
echo =====================================
claude --project "%PROJECT_ROOT%"
```

### Integration with setup-smart.py

```python
def create_claude_launcher(self) -> bool:
    """Create bin/claude launcher script for one-command Claude startup."""
    
    bin_dir = self.project_dir / "bin"
    bin_dir.mkdir(exist_ok=True)
    
    # Unix/Mac launcher
    unix_launcher = f'''#!/bin/bash
# bin/claude - One-command Claude launcher
# Auto-generated by AI-First SDLC setup

set -e
PROJECT_ROOT="$(cd "$(dirname "${{BASH_SOURCE[0]}}")/.." && pwd)"
VENV_DIR="$PROJECT_ROOT/{self.venv_name or 'venv'}"

# Ensure in project directory
cd "$PROJECT_ROOT"

# Setup venv
if [ ! -d "$VENV_DIR" ]; then
    echo "Setting up Python environment..."
    python3 -m venv "$VENV_DIR"
    source "$VENV_DIR/bin/activate"
    pip install --upgrade pip --quiet
    [ -f "requirements.txt" ] && pip install -r requirements.txt
else
    source "$VENV_DIR/bin/activate"
fi

# Launch Claude
echo "🤖 Starting Claude Code in {self.project_name}..."
echo "Python: $(which python)"
exec claude --project "$PROJECT_ROOT"
'''
    
    claude_sh = bin_dir / "claude"
    claude_sh.write_text(unix_launcher)
    claude_sh.chmod(0o755)
    
    # Windows launcher
    windows_launcher = f'''@echo off
REM bin/claude.bat - One-command Claude launcher
setlocal
set PROJECT_ROOT=%~dp0..
set VENV_DIR=%PROJECT_ROOT%\\{self.venv_name or 'venv'}
cd /d "%PROJECT_ROOT%"

if not exist "%VENV_DIR%\\Scripts\\activate.bat" (
    python -m venv "%VENV_DIR%"
    call "%VENV_DIR%\\Scripts\\activate.bat"
    python -m pip install --upgrade pip --quiet
    if exist "requirements.txt" pip install -r requirements.txt
) else (
    call "%VENV_DIR%\\Scripts\\activate.bat"
)

echo Starting Claude Code in {self.project_name}...
claude --project "%PROJECT_ROOT%"
'''
    
    claude_bat = bin_dir / "claude.bat"
    claude_bat.write_text(windows_launcher)
    
    print(f"   ✅ Created Claude launcher: ./bin/claude")
    print(f"   🚀 Start Claude with: ./bin/claude")
    
    return True
```

## Benefits

1. **Zero Friction**: One command does everything
2. **No Manual Steps**: Venv handled automatically
3. **Project Context**: Claude starts in the right directory
4. **Cross-Platform**: Works on Mac, Linux, and Windows
5. **Self-Contained**: Everything needed is in the script

## Success Criteria
- [ ] `./bin/claude` creates venv if missing
- [ ] Activates venv automatically
- [ ] Launches Claude in project context
- [ ] Works on all platforms
- [ ] Clear output showing what's happening

## Implementation Plan
1. Create launcher script templates
2. Integrate with setup-smart.py
3. Test on multiple platforms
4. Update documentation
5. Add to quickstart guide

## User Experience

### Before
```bash
cd my-project
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
claude
```

### After
```bash
./bin/claude
```

That's it. Everything else happens automatically.

## Related Issues
- Users forgetting to activate venv
- Claude starting in wrong directory
- Complex setup instructions
- Platform-specific activation commands